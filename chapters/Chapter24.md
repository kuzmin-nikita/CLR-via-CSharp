_Сериализацией_ (serialization) называется процесс преобразования объекта или графа свызанных объектов в поток байтов. Обратное преобразование называется _десериализацией_ (deserialization). После сериализации появляется возможность дополнительной обработки данных - например, шифрования и сжатия. В .NET Framework существует встроенный механизм сериализации и десериализации.

## Практические пример сериализации/десериализации

_Модулем форматирования_ (formattet) называется тип (он реализует `System.Runtime.Serialization.IFormatter`), умеющий сериализовывать и десериализовывать граф объектов.

Для сериализации графа объектов используется метод `Serialize()` модуля форматирования с передачей в качестве аргументов ссылку на объект потока ввода-вывода и ссылку на сериализцуемый граф. Модуль форматирования знает, как сериализовать весь граф, ссылаясь на описывающие тип каждого объекта метаданные. Для отслеживания состояния экземплярных полей используется отражение. Если какие-то из полей ссылаются на другие объекты, метод сериализует и их. Кроме того, модуль форматирования умеет работать с перекрёстными ссылками и не входит в бесконечные циклы.

При десериализации методом `Deserialize()` в качестве параметра принимается поток ввода-вывода и возвращается ссылка на корневой объект десериализованного графа. При этом исследуется содержимое потока для создания экземпляров всех обнаруженных в потоке объектов.

Следует следить, чтобы сериализация и десериализация производились одним и тем же модулем форматирования. Кроме того, набор графов можно сериализовать в единый поток. Десериализация в таком случае выполняется в том же порядке.

При сериализации в поток записываются полное имя типа и идентификтор сборки. Если такая сборка не найдена в домене при десериализации, то генерируется исключение.

## Сериализуемые типы

В процессе проектирования типа необходимо принять решение о возможности его сериализации. Если для типа планируется сериализация, необходимо пометить тип атрибутом `[Serializable]`. Если хотя бы один из внутренних объектов не поддерживает сериализацию, то будет сгенерировано исключение. По причинам, связанным с производительностью, модуль сериализации не проверяет возможность сериализации для всех объектов в графе. В результате этого данные в потоке ввода-вывода могут быть повреждены. Для возмонжсоти восстановления после таких ситуаций следует использовать `MemoryStream()`.

Атрибут сериализации может быть применн к классам, структурам, перечислениям и делегатам (к последним двум применяется по умолчанию). Атрибут не наследуется производными типами.

В общем случае большинство типов лучше делать сериализуемыми за исключением тех, которые могут содержать конфиденциальные или защищённые данные.

## Управление сериализацией и десериализацией 

После назначения типу атрибута сериализации все экземпляры его полей становятся сериализуемыми (внутри таких типов не стоит определять автосвойства, так как имена полей могут меняться при каждой следующей компиляции). Иногда можно указать некоторые экземпляры как не подлежащие сериализации с помощью атрибута `[NonSerialized]`. Делается это по двум причинам:
- Поле содержит информацию, становящуюся недействительной после десериализации.
- Поля содержат легко обновляемую информацию.

Подобные поля при десериализации могут содежать значение по умолчанию, а не то, которое было на момент сериализации. Решить это можно с использованием метода, помеченного атрибутом `[OnDeserialized]`.

## Сериализация экземпляров типа



## Управление сериализованными и десериализованными данными



### Определение типа, реализующего интерфейс ISerializable, не реализуемый базовым классом



## Контексты потока ввода-вывода



## Сериализация в другой тип и десериализация в другой объект



## Сурогаты сериализации



### Цепочка селекторов суррогатов



## Переопределение сборки и/или типа при десериализации объекта

